## aot-lematizer -- Библиотека морфологического анализа на Java

### Решаемые задачи:
* Лемматизация (получение нормальной формы слова)
* Получение грамматической информации для слова (часть речи, падеж, спряжение и т.д.)

### Описание работы:
1. Библиотека принимает на вход слово и возвращает список возможнных лемм (исходных форм) этого слова.
2. К каждой лемме прикреплён список из наборов грамматических характеристик.
3. Каждый набор грамматических характеристик соответсвует искомому слову.

Например, рассмотрим результат работы библиотеки для слова "замок":  
```
1. <замок, [С, мр, ед, им], [С, мр, ед, вн]>  
2. <замок, [С, мр, ед, им], [С, мр, ед, вн]>  
3. <замокнуть, [Г, дст, прш, мр, ед]>
```  
Мы видим три леммы.  
1. Первая лемма, это слово зАмок (строение).
Вместе с ней лежат два набора характеристик, говорящие о том, чем же является слово замок, по отношению к этой лемме.  
Это либо замок (кто?) в именительном падеже, либо замок (кого?) в винительном падеже.
2. Вторая лемма, это слово замОк (устройство для запирания дверей).   
Для нее, слово замок так же может быть либо именительным, либо винительным падежом.
3. И наконец, третья лемма, это слово замокнуть (он что сделал? он замок под дождем).  
Для нее слово замок характеризуется лишь одним набором грамматической информации.

### Пример использования в коде:

```
// Инициализируем хранилище информации
var flexionStorage = new FlexionStorage();

// Запрашиваем информацию по слову "дорогой"
var results = flexionStorage.get("дорогой");

// Обходим все варианты лемм
for(var lemmaInfo: results) {

  // исходное слово, от которого образовано слово "дорогой" (лемма)
  var sourceLemmaString = lemmaInfo.getLemma();

  // Обходим все флексии (варианты того, чем может являться слово по отношению к лемме)
  for(var flexionInfo: lemmaInfo.getAllFlexions()) {

    // делаем разные действия 
    // в зависимости от грамматических характеристик слова
      
    if(flexion.is(GrammarInfo.Noun) {
      // *** //
    }
      
    if(flexion.isNot(GrammarInfo.ShortAdjective) {
      // *** //
    }
  }
}
```

### Особенности реализации:
* Вввиду частого взаимозаменяемого использования в речи,  
  буква ё рассматривается наравне с буквой е.

### Полезные ссылки:
* [Аббревиатуры использованые в перечислении GrammarInfo](http://phpmorphy.sourceforge.net/dokuwiki/manual-graminfo)  
* [Описание исходного формата словаря](https://sourceforge.net/p/seman/svn/HEAD/tree/trunk/Docs/Morph_UNIX.txt)
* [Консольное приложение использующее aot-lemmatizer](https://github.com/demidko/aot-lematizer/blob/master/testapp/src/main/java/com/farpost/aot/TestApplication.java)

### Проблемы:

1. Высокий alloc rate

### Дальнейшие планы:

1. Изменить выдачу следующим образом (пример для слова замок):  
   <замок, [С, мр, ед, им], [С, мр, ед, вн]>  
   <замок, [С, мр, ед, им], [С, мр, ед, вн]>  
   <замокнуть, [Г, дст, прш, мр, ед]>  
   
2. Новая функция:  
   На вход подается лемма, на выходе все словоформы с характеристиками.
   
3. Согласовать процесс компиляции:  
   редактируемая база данных -> mrd формат -> бинарный формат.
   
### Новая идея для реализации полноценого поиска 
Нужна для выдачи всех лемм по флексии, где к каждой лемме прикрепленны все флексии.
1. Хранилище флексий для словаря. 
   ``` 
   хеш флексии, индекс леммы, индекс леммы, индекс леммы \n  
   хеш флексии, индекс леммы, индекс леммы, индекс леммы \n  
   хеш флексии, индекс леммы, индекс леммы, индекс леммы ....
   ```
    * коллизии разрешаются тем же способом, что и сейчас (хранением строк колизионных флексий).
2. Хранилище лемм по идексу (где лемма - первая флексия).
    ```
   (индекс флексии, индекс грамматики) (индекс флексии, индекс грамматики) \n  
   (индекс флексии, индекс грамматики) (индекс флексии, индекс грамматики) ....  
   ```
3. Хранилище строк флексий по индексу.  
Они могут быть уникальными, для экономии места.  
Даже не уникальные, в однобайтовой кодировке они займут 95,36 мб.
4. Хранилище грамматики по индексу.

  
  
